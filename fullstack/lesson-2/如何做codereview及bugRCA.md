# 记一次 Code Review & bug RCA 主题演讲（PPT 内容摘要整理）
- Code Review
	1. Code Review 的目的与目标
	2. Code Review 方法
	3. Code Review 边界
	4. 团队 Code Review 依懒的必要条件之规范（核心讲）
	5. 实践
- Bug RCA
	1. 什么是 RCA
	2. RCA 流程
	2. 实践

## Code Review

### Code Review 的目的与目标
CodeReview 的目的是提升代码质量，尽早发现潜在缺陷与 BUG，降低修复成本；团队成员对项目的熟悉程度会比较均衡，团队成员对项目的熟悉程度会比较均衡。

### Code Review 方法
- 瞬时的代码审查，也称为结对编程 (pair programming)
- 同步的代码审查，也称为即时 (over-the-shoulder) 代码审查
- 异步的代码审查，也称为有工具支持的 (tool-assisted) 代码审查
- 偶尔的代码审查，也称为基于会议的 (meeting-based) 的代码审查

### Code Review 边界
- 代码是否符合团队约定的规范（考虑 eslint 之外的一些追求）
- 重复代码：比如：抽取，封装
- 代码有没有（业务 / 算法）逻辑错误，比如：功能与需求有偏差；参数传递顺序出错；方法的边界条件有没有考虑，递归，死循环
- 单一原则
- 行为
- 代码污染
- 代码健壮性，比如：异常处理和清理（释放）资源，代码是否采取措施避免运行时错误（如数组边界溢出、被零除、值越界、堆栈溢出等）
- 代码有没有潜在性能问题，比如：频繁的 DOM / 渲染操作、大数据处理，是否会有内存泄露，懒加载，异步和并行处理，缓存等。
- 代码有没有其他待改进的地方，比如：可扩展性 / 过度设计

### 团队 Code Review 依懒的必要条件之规范
为什么说 code review 之前要有规范，如果规范不一样，别人来 review 你的代码，会感觉到无从下手，甚至不想去 review，因为成本大，太耗时间。

规范和性能、功能、结果无关，规范能提升团队的开发效率，减少团队的 gap，保留最佳实践；

所有公司的规范大同小异，无非是脾气，秉性，喜好不同，既然有规范，`我们还可以追求点什么？那就是易读`

代码执行，除了追求性能和稳定，还有一点就是，可维护，自己维护，同事维护。

1. 易读 - 空格
提高可读性，不光是写代码，在写文章，视觉感觉是不一样的，更利于识别，跟技术完全没有关系，但它可以极大提高你的代码可读性。比如：
中文English数字01混合时
中文 English 数字 01 混合时
需要注意的是，不同语言，习惯问题
2. 易读 - 习惯
举例（图片）：css 书写按字母排序（国外母语），另外一种是按布局-内容-修饰区分
3. 易读 - 命名
`变量`—小驼峰、区分单复数，比如：myName、names

`对象`—大驼峰、单数 一般都名词，比如：DogHouse

`常量`—大写、动词，常量代替字面变量，比如：INTERVAL

`函数`—小驼峰、动词开头，比如：showRegister、createUserByNameAndEmail(name, email)

`布尔值`—小驼峰，比如：is，has，can,  silent，举例：isCompleted、hasUser、canDelete，不推荐 if ( !unavailable ) 不是非可用，那就是可用，双重否定表示是肯定

`私有属性`—小驼峰、下划线，一般内部使用，JS 开放，不防着你用，但建议不要用，不保证可用


用什么规范不重要，重要的是要有规范，保障团队统一风格

### 实践
内部代码演示

## Bug RCA

### 什么是 RCA
即根因分析，就是定期或者不定期对一阶段的 bug 进行复盘总结，从单个有价值的 bug 入手，追踪和分析 bug 产生的本质原因，在此基础上对产品各个角色、以及项目流程做改善和优化。

### RCA 流程
RCA 三步走 （2w1h）
1. what?  （bug 是什么？）
2. why?    （bug 产生的原因？）
3. how ?  ( 如何避免这种 bug 再次发生？)

### 实践
内部代码演示

---

**最后结语：当你知道你的代码会被人一行一行 review 时，你的代码一定会努力写的最好，而不是为了完成功能而应付了事，这就是态度上的区分。**

推荐文章：
[CodeReview 规范](https://www.jianshu.com/p/f79c4e948954http:// "CodeReview 规范")
